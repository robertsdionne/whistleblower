// new module script

int login_transparency = 100;


function MaybeLogin() {
  if (UserName.Text.Length > 0) {
    SetNextScreenTransition(eTransitionCrossfade);
    cEgo.ChangeRoom(2);
    username = UserName.Text;
    gLogin.Visible = false;
    login_transparency = 100;
  }
}


function LoginGuiBehavior() {
  if (gLogin.Visible) {
    // Fade in login dialog
    if (login_transparency > 0) {
      login_transparency -= 5;
      gLogin.Transparency = login_transparency;
    }
    // Respond to Return key
    if (IsKeyPressed(eKeyReturn)) {
      MaybeLogin();
    }
  }
}


function repeatedly_execute() {
  LoginGuiBehavior();
}
